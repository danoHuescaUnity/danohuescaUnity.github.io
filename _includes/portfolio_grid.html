<!-- Portfolio Grid Section -->
<section id="portfolio">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2>Portfolio</h2>
        <hr class="star-primary">
      </div>
    </div>

    <div class="portfolio-grid">
      {% for post in site.posts %}
      <div class="portfolio-item">
        <a href="#portfolioModal-{{ post.modal-id }}" class="portfolio-link" data-toggle="modal">
          <div class="portfolio-card">
            <!-- Wrapper 16:9 para imagen o video -->
            <div class="portfolio-thumb-wrapper">
              {% if post.video or post.video_thumb %}
                {% assign thumb_video = post.video %}
                {% if post.video_thumb %}
                  {% assign thumb_video = post.video_thumb %}
                {% endif %}

                {% if post.video_zoom_scale %}
                  {% assign zoom_class = " portfolio-thumb-media-zoom" %}
                  {% assign zoom_style = "transform: scale(" | append: post.video_zoom_scale | append: ");" %}
                {% else %}
                  {% assign zoom_class = "" %}
                  {% assign zoom_style = "" %}
                {% endif %}

                <video class="portfolio-thumb-media{{ zoom_class }}"
                       style="{{ zoom_style }}"
                       muted loop playsinline autoplay>
                  <source src="{{ "/video/" | append: thumb_video | prepend: site.baseurl }}" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
              {% else %}
                <img src="img/portfolio/{{ post.img }}" class="portfolio-thumb-media" alt="{{ post.alt }}">
              {% endif %}
            </div>

            <div class="portfolio-card-body">
              <h3 class="portfolio-card-title">{{ post.title }}</h3>

              {% if post.category or post.client %}
              <p class="portfolio-card-meta">
                {% if post.client %}{{ post.client }}{% endif %}
                {% if post.client and post.category %} &mdash; {% endif %}
                {% if post.category %}{{ post.category }}{% endif %}
              </p>
              {% endif %}

              {% if post.highlights %}
              <ul class="portfolio-card-highlights">
                {% for item in post.highlights limit:3 %}
                  <li>{{ item }}</li>
                {% endfor %}
              </ul>
              {% endif %}

              <div class="portfolio-card-tags">
                {% if post.platforms %}
                  <span class="portfolio-tag">{{ post.platforms }}</span>
                {% endif %}
                {% if post.engine %}
                  <span class="portfolio-tag">{{ post.engine }}</span>
                {% endif %}
              </div>

              <div class="portfolio-card-footer">
                <span class="portfolio-card-cta">View Details</span>
              </div>
            </div>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
